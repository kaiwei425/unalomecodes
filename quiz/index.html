<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="測驗與您有緣的守護神，快速完成題目取得守護神結果與建議。">
  <link rel="canonical" href="https://unalomecodes.com/quiz">
  <title>測驗與您有緣的守護神</title>
  <link rel="stylesheet" href="/css/quiz-index.inline-1.css">
  <meta name="quiz-token" content="quiz_5A9kU3tZmE4hW2xP7qL8vN0r">
</head>
<body>
  <header>
    <div class="wrap brand">
      <img id="brandLogo" src="https://i.ibb.co/7mtppQQ/logo.jpg" alt="logo" />
      <div>
        <h1>測驗與您有緣的守護神</h1>
        <p class="tagline">7 題 1 分鐘，找出守護神，解鎖專屬優惠與配戴建議</p>
      </div>
      <div class="brand-actions">
        <button type="button" class="btn primary" data-fortune-btn>領取日籤</button>
        <a class="btn primary" href="/shop">回到首頁</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="card step-card" id="stepDow">
      <h2>你是星期幾出生？</h2>
      <div id="dowBox" class="chips" role="group" aria-label="weekday"></div>
    </div>

    <div class="card step-card" id="stepZod">
      <h2>你的星座？</h2>
      <div id="zodiacBox" class="chips" role="group" aria-label="zodiac"></div>
      <div class="footer single">
        <button id="prevStepBtn" class="btn">← 上一題</button>
      </div>
    </div>

    <div class="card step-card" id="quizBox">
      <div id="qTitle" class="q"></div>
      <div id="opts" class="grid"></div>
      <div class="footer">
        <button id="prevBtn" class="btn">← 上一題</button>
        <button id="nextBtn" class="btn primary">下一題 →</button>
      </div>
    </div>

    <div class="card" id="lineFortuneEntry" style="display:none">
      <h2>已完成守護神測驗</h2>
      <div id="lineGuardianBadge" class="guardian-badge" style="display:none;"></div>
      <div class="footer line-entry-actions">
        <button type="button" class="btn" id="lineRetakeBtn">重新測驗守護神</button>
      </div>
    </div>

    <div class="card" id="resultBox" style="display:none">
      <h2>你的守護者</h2>
      <img id="deityImg" alt="守護神" crossorigin="anonymous" referrerpolicy="no-referrer" style="display:none;width:100%;max-height:300px;object-fit:contain;border:1px solid var(--border);border-radius:12px;background:#fff;margin-bottom:12px;" />
      <div class="result" id="resultText">尚未完成作答</div>
      <div style="margin:12px 0">
        <div class="step">緣分值</div>
        <div class="bar"><div id="affBar" class="fill"></div></div>
        <div id="affText" class="note" style="margin-top:6px"></div>
      </div>
      <div style="margin:18px 0 8px">
        <h2 style="margin-bottom:8px">佛牌配戴建議</h2>
        <div id="amuletAdvice" class="result" style="display:none">載入中…</div>
        <div class="footer" id="adviceActions" style="margin-top:8px">
          <button id="getCouponBtn" class="btn ok">點我領取專屬優惠</button>
        </div>
        <div id="couponWrap" class="result" style="display:none"></div>
        <div style="margin-top:8px">
          <button id="copyCouponBtn" class="btn ghost" style="display:none">複製優惠碼</button>
          <button id="saveCouponBtn" class="btn" style="display:none">存到我的優惠券</button>
        </div>
      </div>
      <div class="footer">
        <a id="deityLink" target="_blank" rel="noopener" class="btn">查看完整介紹</a>
        <a id="shareLink" class="btn ok">重新測驗一次</a>
        <a id="menuLink" target="_blank" rel="noopener" class="btn">瀏覽其他守護者</a>
        <a class="btn" href="/shop">前往選購專屬聖物</a>
      </div>
    </div>

    <dialog id="fortuneDialogQuiz" class="fortune-dialog">
      <div class="fortune-shell">
        <div class="fortune-head">
          <div>
            <div class="fortune-title">今日專屬日籤</div>
            <div class="fortune-date" id="fortuneDateQuiz">—</div>
          </div>
          <button type="button" class="fortune-close" id="fortuneCloseQuiz">✕</button>
        </div>
        <div class="fortune-body">
          <div id="fortuneLoadingQuiz" class="fortune-loading">正在翻牌中…</div>
          <div id="fortuneErrorQuiz" class="fortune-error" style="display:none;"></div>
          <div id="fortuneCardQuiz" class="fortune-card" style="display:none;">
            <div class="fortune-stars" id="fortuneStarsQuiz"></div>
            <div class="fortune-summary" id="fortuneSummaryQuiz"></div>
            <div class="fortune-section">
              <div class="fortune-label">生活小建議</div>
              <div class="fortune-text" id="fortuneAdviceQuiz"></div>
            </div>
            <div class="fortune-section">
              <div class="fortune-label" id="fortuneRitualLabelQuiz">守護神想對你說</div>
              <div class="fortune-text" id="fortuneRitualQuiz"></div>
            </div>
            <div class="fortune-meta" id="fortuneMetaQuiz"></div>
          </div>
        </div>
      </div>
    </dialog>
  </main>
  <script src="/js/quiz-index.inline-1.js"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="/js/auth.js?v=20240930"></script>
  <div id="resultLoading" class="loading-overlay" role="status" aria-live="polite">
    <div class="loading-card">
      <div class="loading-spinner" aria-hidden="true"></div>
      <div class="loading-title">守護神感應中…</div>
      <div class="loading-sub">請稍候</div>
    </div>
  </div>

<script src="/js/quiz-index.inline-2.js"></script>
</body>
</html>
