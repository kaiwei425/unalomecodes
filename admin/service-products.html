<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="description" content="後台服務商品管理頁（僅限管理員）。">
<meta name="robots" content="noindex,nofollow">
<link rel="canonical" href="https://unalomecodes.com/admin/service-products">
<title>unalomecodes | 懂玩泰國 - 後台 service products</title>
<link rel="stylesheet" href="/css/admin-service-products.inline-1.css">
<script src="/js/admin-service-products.inline-1.js"></script>
<script src="/js/admin-guard.js" defer></script>
<link rel="stylesheet" href="/admin/admin-ui.css">
<script src="/js/admin-shell.js" defer></script>
</head>
<body>
  <div class="wrap">
    <div class="backLink"><a class="backBtn" href="/admin">← 返回主選單</a></div>
    <h1>服務型商品管理</h1>
    <div class="toolbar">
      <input id="filter" placeholder="搜尋服務名稱…">
      <button class="btn" id="btnReload">重新整理</button>
    </div>
    <div class="grid">
      <div class="card form-card">
        <h3 style="margin:0 0 6px;">新增 / 編輯服務</h3>
        <p class="muted">輸入資料後按「儲存服務」。若選取表格中的項目會帶入資料供編輯。</p>
        <input type="hidden" id="svc_id">
        <input type="hidden" id="svc_duration">
        <label>服務名稱</label>
        <input id="svc_name" placeholder="例：蠟燭祈福｜基本祈請">
        <label>費用（NT$）</label>
        <input id="svc_price" type="number" min="0" value="0">
        <label>啟用數量欄位</label>
        <div class="row" style="align-items:center;gap:8px;">
          <label style="margin:0;display:flex;align-items:center;gap:8px;font-size:13px;">
            <input id="svc_qty_enabled" type="checkbox">
            開啟數量輸入（單價 × 數量）
          </label>
        </div>
        <label>數量欄位名稱</label>
        <input id="svc_qty_label" placeholder="例：幾口棺" value="數量">
        <label>車馬費（固定，加在總價）</label>
        <input id="svc_fixed_fee" type="number" min="0" value="0">
        <div class="muted">總價 = 單價 × 數量 + 車馬費。</div>
        <label>需要上傳個人照片</label>
        <div class="row" style="align-items:center;gap:8px;">
          <label style="margin:0;display:flex;align-items:center;gap:8px;font-size:13px;">
            <input id="svc_photo_required" type="checkbox" checked>
            需要上傳祈福照片
          </label>
        </div>
        <label>已售出（顯示用）</label>
        <input id="svc_sold" type="number" min="0" value="0">
        <label>限時上架至（選填）</label>
        <input id="svc_limited_until" type="datetime-local">
        <div class="muted">留空代表不限時，到期會自動隱藏。</div>
        <label>詳細說明</label>
        <textarea id="svc_description" placeholder="完整介紹、祈福流程、注意事項…"></textarea>
        <label>IG 影片連結（可選）</label>
        <input id="svc_instagram" placeholder="https://www.instagram.com/p/XXXX/">
        <label>包含內容（每行一項）</label>
        <textarea id="svc_includes" placeholder="蠟燭祈請一次&#10;祈福祝禱錄音節錄"></textarea>
        <input type="hidden" id="svc_active" value="1">
        <div class="row" style="justify-content:space-between;align-items:center;margin-top:12px;">
          <label style="margin:0">服務圖片（可多張，首張為封面）</label>
          <button class="btn" type="button" id="btnImagesUpload">上傳圖片</button>
        </div>
        <div class="imgList" id="svcImagePreview"><span class="muted">尚未上傳</span></div>
        <textarea id="svc_images" style="display:none;"></textarea>
        <input type="file" id="fileImages" accept="image/*" multiple style="display:none;">
        <label style="display:flex;justify-content:space-between;align-items:center;">
          <span>服務項目（可供顧客選擇）</span>
          <button class="btn" type="button" id="btnAddOption">＋新增項目</button>
        </label>
        <div class="muted">例如不同蠟燭或供品組合，輸入名稱與加價（0 代表不加價）。</div>
        <div id="svc_options" class="optionsGrid"></div>
        <div class="row" style="margin-top:14px;gap:8px;">
          <button class="btn primary" id="btnSave">儲存服務</button>
          <button class="btn" id="btnReset">清空</button>
          <button class="btn danger" id="btnDelete" style="margin-left:auto;display:none;">刪除此服務</button>
        </div>
        <div class="muted" id="formMsg" style="margin-top:10px;"></div>
      </div>
      <div class="card list-card" style="overflow:auto;">
        <h3 style="margin:0 0 10px;">服務清單</h3>
        <table>
          <thead>
            <tr><th style="width:60px">封面</th><th>服務資訊</th><th style="width:120px">費用</th><th style="width:80px">操作</th></tr>
          </thead>
          <tbody id="svcListBody"><tr><td colspan="4" class="muted">尚無資料</td></tr></tbody>
        </table>
      </div>
    </div>
  </div>
<script src="/js/admin-service-products.inline-2.js"></script>
</body>
</html>
